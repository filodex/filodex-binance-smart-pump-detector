let obj = {
    '1min': {
        up: [
            {
                ticker: 'STMXUSDT',
                deviation: 0.72,
                lastPrice: '0.00504700',
                prev1MinPrice: '0.00501100',
            },
            {
                ticker: 'FILUSDT',
                deviation: 0.46,
                lastPrice: '4.38000000',
                prev1MinPrice: '4.36000000',
            },
            {
                ticker: 'BNXUSDT',
                deviation: 0.13,
                lastPrice: '152.30000000',
                prev1MinPrice: '152.10000000',
            },
            {
                ticker: 'DYDXUSDT',
                deviation: 0.09,
                lastPrice: '2.29100000',
                prev1MinPrice: '2.28900000',
            },
            {
                ticker: 'PEOPLEUSDT',
                deviation: 0.09,
                lastPrice: '0.02338000',
                prev1MinPrice: '0.02336000',
            },
            {
                ticker: 'OCEANUSDT',
                deviation: 0.07,
                lastPrice: '0.13450000',
                prev1MinPrice: '0.13440000',
            },
            {
                ticker: 'C98USDT',
                deviation: 0,
                lastPrice: '0.27780000',
                prev1MinPrice: '0.27780000',
            },
            {
                ticker: 'EGLDUSDT',
                deviation: 0,
                lastPrice: '43.15000000',
                prev1MinPrice: '43.15000000',
            },
            {
                ticker: 'HBARUSDT',
                deviation: 0,
                lastPrice: '0.04860000',
                prev1MinPrice: '0.04860000',
            },
            {
                ticker: 'KSMUSDT',
                deviation: 0,
                lastPrice: '24.92000000',
                prev1MinPrice: '24.92000000',
            },
        ],
        down: [
            {
                ticker: 'SRMUSDT',
                deviation: -1.97,
                lastPrice: '0.30676000',
                prev1MinPrice: '0.31291000',
            },
            {
                ticker: 'RAYUSDT',
                deviation: -1.95,
                lastPrice: '0.21120000',
                prev1MinPrice: '0.21540000',
            },
            {
                ticker: 'BTTCUSDT',
                deviation: -1.47,
                lastPrice: '0.00000067',
                prev1MinPrice: '0.00000068',
            },
            {
                ticker: 'CTSIUSDT',
                deviation: -0.74,
                lastPrice: '0.10670000',
                prev1MinPrice: '0.10750000',
            },
            {
                ticker: 'UNFIUSDT',
                deviation: -0.47,
                lastPrice: '4.23600000',
                prev1MinPrice: '4.25600000',
            },
            {
                ticker: 'CELOUSDT',
                deviation: -0.47,
                lastPrice: '0.42500000',
                prev1MinPrice: '0.42700000',
            },
            {
                ticker: 'DGBUSDT',
                deviation: -0.43,
                lastPrice: '0.00694000',
                prev1MinPrice: '0.00697000',
            },
            {
                ticker: 'MATICUSDT',
                deviation: -0.39,
                lastPrice: '0.91710000',
                prev1MinPrice: '0.92070000',
            },
            {
                ticker: 'RENUSDT',
                deviation: -0.39,
                lastPrice: '0.07827800',
                prev1MinPrice: '0.07858200',
            },
            {
                ticker: 'HOTUSDT',
                deviation: -0.38,
                lastPrice: '0.00158400',
                prev1MinPrice: '0.00159000',
            },
        ],
    },
    '3min': {
        up: [
            {
                ticker: 'STMXUSDT',
                deviation: 0.72,
                lastPrice: '0.00504700',
                prev3MinPrice: '0.00501100',
            },
            {
                ticker: 'DYDXUSDT',
                deviation: 0.35,
                lastPrice: '2.29100000',
                prev3MinPrice: '2.28300000',
            },
            {
                ticker: 'PEOPLEUSDT',
                deviation: 0.26,
                lastPrice: '0.02338000',
                prev3MinPrice: '0.02332000',
            },
            {
                ticker: 'SFPUSDT',
                deviation: 0.03,
                lastPrice: '0.61280000',
                prev3MinPrice: '0.61260000',
            },
            {
                ticker: 'BANDUSDT',
                deviation: 0,
                lastPrice: '2.01700000',
                prev3MinPrice: '2.01700000',
            },
            {
                ticker: 'BNXUSDT',
                deviation: 0,
                lastPrice: '152.30000000',
                prev3MinPrice: '152.30000000',
            },
            {
                ticker: 'FILUSDT',
                deviation: 0,
                lastPrice: '4.38000000',
                prev3MinPrice: '4.38000000',
            },
            {
                ticker: 'RLCUSDT',
                deviation: 0,
                lastPrice: '0.87500000',
                prev3MinPrice: '0.87500000',
            },
            {
                ticker: 'TOMOUSDT',
                deviation: -0.1,
                lastPrice: '0.30280000',
                prev3MinPrice: '0.30310000',
            },
            {
                ticker: 'DUSKUSDT',
                deviation: -0.11,
                lastPrice: '0.09130000',
                prev3MinPrice: '0.09140000',
            },
        ],
        down: [
            {
                ticker: 'SRMUSDT',
                deviation: -2.55,
                lastPrice: '0.30676000',
                prev3MinPrice: '0.31478000',
            },
            {
                ticker: 'RAYUSDT',
                deviation: -2.22,
                lastPrice: '0.21120000',
                prev3MinPrice: '0.21600000',
            },
            {
                ticker: 'CTSIUSDT',
                deviation: -1.66,
                lastPrice: '0.10670000',
                prev3MinPrice: '0.10850000',
            },
            {
                ticker: 'ALGOUSDT',
                deviation: -0.78,
                lastPrice: '0.27870000',
                prev3MinPrice: '0.28090000',
            },
            {
                ticker: 'MASKUSDT',
                deviation: -0.74,
                lastPrice: '3.21300000',
                prev3MinPrice: '3.23700000',
            },
            {
                ticker: 'MATICUSDT',
                deviation: -0.65,
                lastPrice: '0.91710000',
                prev3MinPrice: '0.92310000',
            },
            {
                ticker: 'WOOUSDT',
                deviation: -0.61,
                lastPrice: '0.12950000',
                prev3MinPrice: '0.13030000',
            },
            {
                ticker: 'OMGUSDT',
                deviation: -0.6,
                lastPrice: '1.15900000',
                prev3MinPrice: '1.16600000',
            },
            {
                ticker: 'MTLUSDT',
                deviation: -0.58,
                lastPrice: '0.68800000',
                prev3MinPrice: '0.69200000',
            },
            {
                ticker: 'OGNUSDT',
                deviation: -0.56,
                lastPrice: '0.10630000',
                prev3MinPrice: '0.10690000',
            },
        ],
    },
    '5min': {
        up: [
            {
                ticker: 'STMXUSDT',
                deviation: 0.74,
                lastPrice: '0.00504700',
                prev5MinPrice: '0.00501000',
            },
            {
                ticker: 'SFPUSDT',
                deviation: 0.05,
                lastPrice: '0.61280000',
                prev5MinPrice: '0.61250000',
            },
            {
                ticker: 'FILUSDT',
                deviation: 0,
                lastPrice: '4.38000000',
                prev5MinPrice: '4.38000000',
            },
            {
                ticker: 'PEOPLEUSDT',
                deviation: 0,
                lastPrice: '0.02338000',
                prev5MinPrice: '0.02338000',
            },
            {
                ticker: 'BNXUSDT',
                deviation: -0.07,
                lastPrice: '152.30000000',
                prev5MinPrice: '152.40000000',
            },
            {
                ticker: 'DYDXUSDT',
                deviation: -0.09,
                lastPrice: '2.29100000',
                prev5MinPrice: '2.29300000',
            },
            {
                ticker: 'RLCUSDT',
                deviation: -0.11,
                lastPrice: '0.87500000',
                prev5MinPrice: '0.87600000',
            },
            {
                ticker: 'XMRUSDT',
                deviation: -0.15,
                lastPrice: '129.10000000',
                prev5MinPrice: '129.30000000',
            },
            {
                ticker: 'XLMUSDT',
                deviation: -0.22,
                lastPrice: '0.09190000',
                prev5MinPrice: '0.09210000',
            },
            {
                ticker: 'IMXUSDT',
                deviation: -0.24,
                lastPrice: '0.41500000',
                prev5MinPrice: '0.41600000',
            },
        ],
        down: [
            {
                ticker: 'CTSIUSDT',
                deviation: -2.11,
                lastPrice: '0.10670000',
                prev5MinPrice: '0.10900000',
            },
            {
                ticker: 'RAYUSDT',
                deviation: -1.95,
                lastPrice: '0.21120000',
                prev5MinPrice: '0.21540000',
            },
            {
                ticker: 'ALGOUSDT',
                deviation: -1.35,
                lastPrice: '0.27870000',
                prev5MinPrice: '0.28250000',
            },
            {
                ticker: 'SRMUSDT',
                deviation: -1.33,
                lastPrice: '0.30676000',
                prev5MinPrice: '0.31090000',
            },
            {
                ticker: 'WOOUSDT',
                deviation: -0.99,
                lastPrice: '0.12950000',
                prev5MinPrice: '0.13080000',
            },
            {
                ticker: 'CELOUSDT',
                deviation: -0.93,
                lastPrice: '0.42500000',
                prev5MinPrice: '0.42900000',
            },
            {
                ticker: 'OGNUSDT',
                deviation: -0.93,
                lastPrice: '0.10630000',
                prev5MinPrice: '0.10730000',
            },
            {
                ticker: 'BALUSDT',
                deviation: -0.93,
                lastPrice: '5.33300000',
                prev5MinPrice: '5.38300000',
            },
            {
                ticker: 'UNFIUSDT',
                deviation: -0.87,
                lastPrice: '4.23600000',
                prev5MinPrice: '4.27300000',
            },
            {
                ticker: 'CHZUSDT',
                deviation: -0.85,
                lastPrice: '0.22220000',
                prev5MinPrice: '0.22410000',
            },
        ],
    },
    '10min': {
        up: [
            {
                ticker: 'STMXUSDT',
                deviation: 0.92,
                lastPrice: '0.00504700',
                prevPrice: '0.00500100',
            },
            {
                ticker: 'DYDXUSDT',
                deviation: 0.09,
                lastPrice: '2.29100000',
                prevPrice: '2.28900000',
            },
            {
                ticker: 'FTTUSDT',
                deviation: 0,
                lastPrice: '1.43220000',
                prevPrice: '1.43220000',
            },
            {
                ticker: 'BNXUSDT',
                deviation: -0.07,
                lastPrice: '152.30000000',
                prevPrice: '152.40000000',
            },
            {
                ticker: 'XMRUSDT',
                deviation: -0.23,
                lastPrice: '129.10000000',
                prevPrice: '129.40000000',
            },
            {
                ticker: 'SFPUSDT',
                deviation: -0.24,
                lastPrice: '0.61280000',
                prevPrice: '0.61430000',
            },
            {
                ticker: 'MASKUSDT',
                deviation: -0.25,
                lastPrice: '3.21300000',
                prevPrice: '3.22100000',
            },
            {
                ticker: 'DGBUSDT',
                deviation: -0.29,
                lastPrice: '0.00694000',
                prevPrice: '0.00696000',
            },
            {
                ticker: 'MKRUSDT',
                deviation: -0.29,
                lastPrice: '686.00000000',
                prevPrice: '688.00000000',
            },
            {
                ticker: 'XEMUSDT',
                deviation: -0.31,
                lastPrice: '0.03210000',
                prevPrice: '0.03220000',
            },
        ],
        down: [
            {
                ticker: 'SRMUSDT',
                deviation: -5.28,
                lastPrice: '0.30676000',
                prevPrice: '0.32387000',
            },
            {
                ticker: 'RAYUSDT',
                deviation: -3.34,
                lastPrice: '0.21120000',
                prevPrice: '0.21850000',
            },
            {
                ticker: 'BTTCUSDT',
                deviation: -1.47,
                lastPrice: '0.00000067',
                prevPrice: '0.00000068',
            },
            {
                ticker: 'CTSIUSDT',
                deviation: -1.39,
                lastPrice: '0.10670000',
                prevPrice: '0.10820000',
            },
            {
                ticker: 'ALGOUSDT',
                deviation: -1.14,
                lastPrice: '0.27870000',
                prevPrice: '0.28190000',
            },
            {
                ticker: 'UNFIUSDT',
                deviation: -1.05,
                lastPrice: '4.23600000',
                prevPrice: '4.28100000',
            },
            {
                ticker: 'FTMUSDT',
                deviation: -0.99,
                lastPrice: '0.18940000',
                prevPrice: '0.19130000',
            },
            {
                ticker: 'MATICUSDT',
                deviation: -0.96,
                lastPrice: '0.91710000',
                prevPrice: '0.92600000',
            },
            {
                ticker: 'CELOUSDT',
                deviation: -0.93,
                lastPrice: '0.42500000',
                prevPrice: '0.42900000',
            },
            {
                ticker: 'SOLUSDT',
                deviation: -0.91,
                lastPrice: '14.11000000',
                prevPrice: '14.24000000',
            },
        ],
    },
    '15min': [],
}

import fs from 'fs'
import path from 'path'

let atrRelativeGreatestDeviations = calcAtrRelativeGreatestDeviations(obj)

// return тот же объект с новыми полями (отклонением и atr)
function calcAtrRelativeGreatestDeviations(greatestDeviations) {
    let atrs = JSON.parse(
        fs.readFileSync(
            path.join(path.resolve(), 'src', 'BinanceFuturesAtrs.json')
        )
    )

    let generalArray = []
    for (const timeframe in greatestDeviations) {
        // 1min/3min/5min...
        for (const updown in greatestDeviations[timeframe]) {
            for (const objKey in greatestDeviations[timeframe][updown]) {
                let obj = greatestDeviations[timeframe][updown][objKey]
                let atrRelAbs = getAtrs(obj.ticker, atrs)
                obj.atrAbs = atrRelAbs.atr_abs
                obj.atrRel = atrRelAbs.atr_relative
                obj.deviationRelativeToAtr = obj.deviation / obj.atrRel

                generalArray.push(obj)
            }
        }
    }
    console.log(generalArray)
}

function getAtrs(ticker, atrsList) {
    for (const key in atrsList) {
        if (atrsList[key].ticker === ticker) {
            return atrsList[key]
        }
    }
}

function calcRelativeDeviation(obj) {}
